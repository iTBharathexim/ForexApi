var split = ''
var val = ''
var output = new Object()
a = [];
// a.push(text)
//
var abc = [` \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\n \n\nPort Code SB No SB Date\nINDIAN CUSTOMS EDI SYSTEM INCOK4 7034081 l 27-DEC-21\nCENTRAL BOARD OF INDIRECT TAXES AND CUSTOMS IEC/ Br 031 1041060 ‘ 3\nDEPARTMENT OF REVENUE - MINISTRY OF FINANCE GSTIN/ TYPE 32AAJCA73O8P1ZE GSN\nTYPE INV ITEM CONT\nNos 1 1 0 '\nKOCHI AIRPORT NEDUMBASSERY COCHIN KERALA 683111 PKG 139 G.WT I KGS 696 * 5522271220211700\nPART - l - SHIPPING BILL SUMMARY\na) 1.MODE 2.ASSESS 3.EXMN 4.JOBBING 5.MEIS 6.DBK 7.RODTP 8.DEEC/DFIA 9.DFRC 10.RE-EXP 11.LUT\n4 F.’ AIR N Y N Y Y Y N Y Y\nIE 12.PORT OF LOADING INCOK4 (Cochin) 13.COUNTRY OF FINALDESTINATIOIQATAR\ncn 14.STATE OF ORIGIN KERALA 15.PORT OF FINAL DESTINATION DOH (DOHA)\n16.PORT OF DISCHARGliDOH (DOHA) 17.COUNTRY OF DISCHARGE QATAR\n1.EXPORTER'S NAME & ADDRESS 7.CONSIGNEE NAME & ADDRESS\nz ANAPPADIKKAL TRADING COMPANY PRIVATE LIMITED M/S. GRAND MALL W.L.L.\n< a) PALLATHUKADAVIL HOUSE, ASIAN TOWN\nSt: =' THURAVUNKARA P.O, NEDUMBASSERY, INDUSTRIAL AREA ST NO:37 P O BOX - 40465, DOHA, QATAR\n6' E KOCHI 12.Type lPrivate QA\nI.u "QJ 3. AD CODE: 6210065 8. GSTIN / TYPE 32AAJCA7308P1ZE GSN\nS 4.RBI WAIVER NO.& DT 9.FOREX BANK A/C NO. 10XXXXXXXXX074\n5.CB NAME M/S NAV BHARATH ENTERPRISES 10.DBK BANK A/C NO. 10XXXXXXXXX074\n6.AEO 11. IFSC NO. FDRL0001056\n3 < 1.FOB VALUE 2.FREIGHT 3.INSURANC 4.DISCOU 5.COM . 1.DBK CLAIM 2. IGST AMT 3.CESS AMT\n2E 56295.69 62730 0 0 0 . E 67\n>_ 3 6.DEDUCTIONS 7.P/C 8.DUTY 9.CESS a m 4.IGST VALUE 5.RODTEP AMT 6.ROSCTL AMT\n0w 0 0 815 0\n|- 1.MAWB NO. 2.MAWB DT 3.HAWB NO.l4.HAWB DT N.O.C. 1.SNO 2.INV NO. 3. INV AMT. 4.CURRENC\n{I} <3 15773399605 5 >- 1 APVC/549/21-22 1604.05 USD\nE <_t 4. CIN NO. 5. CIN DT. 6. CIN SITE ID 6E\nE E 21 PCEG1227453017400 27-DEC-21 INCOK4 E;\nE a __\nLIJ u- a\n1.CONTAINER l 2.SEAI_ l 3.DATE l4.S No 1SR.Nol 2.CHALLAN NO l3.PAYMT DTl 4.AMOUNT\ncn\n_l\nE z\nLIJ U) lu-J\nE =' a\n5 E I 5\nO I.u _|\nI.u Q _I\n9 3‘:\nU\n>< a) 1.SEAL TYPE 2.NATURE OF CARGO 3.NO. OF PACKETS 4.NO. OF CONTAINERS 5.LOOSE PACKETS\nl'IZJ <=t' WAREHOUSE SEALED PACKAGED 139 0 139\n<2: |- 6.MARKS & NUMBERS WE INTENT TO CLAIM REWARDS UNDER RODTEP SCHEME .,l/WE UNDERTAKE TO ABIDE BY THE\n_- “QJ PROVISIONS OF FOREIGN EXCHANGE MANAGEMENT ACT, 1999, AS AMENDED FROM TIME TO TIME,\nINCLUDING REALISATION OR REPATRIATION OF FOREIGN EXCHANGE TO OR FROM INDIA.\n1.EVENT 2.DATE 3.TIME 4.LEO NO. 10/55\nﬁg) 5.SubmiSSion 27-DEC-21 12:21 6.LEO Date. 27-DEC-21\n_l\n85 5.Assessment 8.BRC Realisation Date 30-SEP-22\nSig 7.Examination 27-DEC-21 16:49\n_’ 9.LEO 27-DEC-21 16:59\nGlossary\nA: ASSESS - Assessed, EXMN - Examined, MEIS - Merchantise Export Incentive Scheme, DBK - Drawback, ROSL - Rebate of State Levies,\nDEEC - Duty Exemption Entitlement Certificate, DFRC - Duty Free Replenishment Certificate,LUT - Letter of Under Taking. B: CB - Customs Broker\nAD Authoized Dealer , AEO - Authorized Economic Operator, UCR - Unique Customs Reference C: DISCOU - Discount, COM - CommiSSion,\nP/C Packing ChargeS,D: EX. PR.- Export Promotions E: MAWB / HAWB - Master/ House Airway Bill Number J:BRC- Bank Realisation Certificate\n\n \n\n \n\nScan QR Code using ICETRAK Mobile App for authentication.\nViSit ICEGATE portal to verify latest version*.\n\nPage\n\n10f6\n\n \n\n`]

identifyPdf(abc)

function identifyPdf(temp) {
    //
    for (let i = 0; i < temp.length; i++) {
        val = val.concat(temp[i])
    }
    try {

        //
        split = val.split("\n");
        
        split = split.filter(function (el) {
            return el.trim() != '';
        });
        

        var boeNumberLine = getAllIndexes("BE No")
        var sbno = getAllIndexes("SB")
        // getJson()
        generatePdfJson()
    } catch {
        
        let res = [output]
        // resolve(res)
        
    }
}

function generatePdfJson() {


    // var removeEmpty = ['',]
    split = split.filter(function (el) {
        return el.trim() != '';
    });

    //AD BILL NO
    output["adBillNo"] = "";

    // SHIPPING BILL NO
    var sbno = getAllIndexes("SB");
    var sbDate
    var sbDateTpggle = false
    // 
    if (sbno.length > 0) {

        var sbNoValue = split[0].toLocaleLowerCase().includes("port") ? getValuesFromPdf(parseInt(sbno) + 1, " ", 5, null) :
            split[1].toLocaleLowerCase().includes("status") ? getValuesFromPdf(parseInt(sbno) + 1, " ", 1, getValuesFromPdf(parseInt(sbno) + 1, "|", 1, null)) :
                getValuesFromPdf(parseInt(sbno) + 1, " ", 1, null);
        output["sbno"] = sbNoValue;
        if (sbNoValue.length < 2) {
            sbNoValue = split[0].toLocaleLowerCase().includes("port") ? getValuesFromPdf(parseInt(sbno) + 1, " ", 6, null) :
                split[1].toLocaleLowerCase().includes("status") ? getValuesFromPdf(parseInt(sbno) + 1, " ", 1, getValuesFromPdf(parseInt(sbno) + 1, "|", 1, null)) :
                    getValuesFromPdf(parseInt(sbno) + 1, " ", 1, null);
            output["sbno"] = sbNoValue;
            if (sbNoValue.length == 0) {
                output["sbno"] = "";
            }
            sbDate = split[0].toLocaleLowerCase().includes("port") ?
                (split[parseInt(sbno) + 1].toLocaleLowerCase().includes("|") ? getValuesFromPdf(parseInt(sbno) + 1, "_", 1, getValuesFromPdf(parseInt(sbno) + 1, "|", 1, null)) : getValuesFromPdf(parseInt(sbno) + 1, " ", 7, null) + "-" + getValuesFromPdf(parseInt(sbno) + 1, " ", 8, null) + "-" + getValuesFromPdf(parseInt(sbno) + 1, " ", 9, null)) :
                split[1].toLocaleLowerCase().includes("status") ? getValuesFromPdf(parseInt(sbno) + 2, "|", 1, null) : getValuesFromPdf(parseInt(sbno) + 1, " ", 2, null);

            sbDateTpggle = true
            output["sbdate"] = sbDate;
            if (sbDate.length == 0) {
                output["sbdate"] = "";
            }

        }
    } else if (sbno.length == 0) {
        output["sbno"] = "";
    }

    // // SHIPPING BILL DATE
    if (!sbDateTpggle) {
        if (sbno.length > 0) {
            sbDate = split[0].toLocaleLowerCase().includes("port") ?
                (split[parseInt(sbno) + 1].toLocaleLowerCase().includes("|") ? getValuesFromPdf(parseInt(sbno) + 1, "_", 1, getValuesFromPdf(parseInt(sbno) + 1, "|", 1, null)) : getValuesFromPdf(parseInt(sbno) + 1, " ", 6, null)) :
                split[1].toLocaleLowerCase().includes("status") ? getValuesFromPdf(parseInt(sbno) + 2, "|", 1, null) : getValuesFromPdf(parseInt(sbno) + 1, " ", 2, null);
            if (sbDate.length < 2) {
                sbDate = split[0].toLocaleLowerCase().includes("port") ?
                    (split[parseInt(sbno) + 1].toLocaleLowerCase().includes("|") ? getValuesFromPdf(parseInt(sbno) + 1, "_", 1, getValuesFromPdf(parseInt(sbno) + 1, "|", 1, null)) : getValuesFromPdf(parseInt(sbno) + 1, " ", 7, null)) :
                    split[1].toLocaleLowerCase().includes("status") ? getValuesFromPdf(parseInt(sbno) + 2, "|", 1, null) : getValuesFromPdf(parseInt(sbno) + 1, " ", 2, null);
            }
            output["sbdate"] = sbDate;
        } else if (sbno.length == 0) {
            output["sbdate"] = "";
        }
    }



    //PORT CODE
    var portCode = getValuesFromPdf(parseInt(sbno) + 1, " ", 4, null)
    output["portCode"] = portCode;
    if (portCode == undefined) {
        portCode = getValuesFromPdf(parseInt(sbno) + 1, " ", 0, null)
        output["portCode"] = portCode;
    }

    //IEC Code
    var iecCodeLine = split[2].toLocaleLowerCase().includes("central") ? getAllIndexes("EC/ Br") : getAllIndexes("hhhhggh");
    // 
    if (iecCodeLine.length > 0) {
        //
        var iecCode = getValuesFromPdf(iecCodeLine, " ", 9, null);
        if (iecCode.length < 5) {
            iecCode = getValuesFromPdf(iecCodeLine, " ", 9, null) + getValuesFromPdf(iecCodeLine, " ", 10, null);
            
            output["ieccode"] = iecCode;
        }
        // if (iecCode == "BOARD") {
        //     //
        //     var iecCode1 = getValuesFromPdf(iecCodeLine, "|", 1, null);
        //     var iecCode = getValuesFromPdf(iecCodeLine, " ", 1, iecCode1);
        //     output["ieccode"] = iecCode;
        // } else {
        //     //
        //     //
        //     output["ieccode"] = iecCode;
        // }
    } else if (iecCodeLine.length == 0) {
        iecCodeLine = getAllIndexes("EClBr");
        if (iecCodeLine.length > 0) {
            iecCode = getValuesFromPdf(iecCodeLine, " ", 2, null);
            output["ieccode"] = iecCode;
        } else {
            iecCode = getValuesFromPdf([2], " ", 9, null);
            output["ieccode"] = iecCode;
            if (iecCode == undefined) {
                output["ieccode"] = ""
            }
        }
    }

    //IEC Name
    // var iecNameLine = getValuesFromPdf(iecCodeLine, " ", IEC)
    // var iecName = split[parseInt(iecCodeLine) + 4]
    // 
    //IEC Name
    // var iecNameLine = getValuesFromPdf(iecCodeLine, " ", IEC)
    // var iecName = split[parseInt(iecCodeLine) + 4]
    // 
    var iecNameLine = getAllIndexes("1.EXPORTER'S")
    var iecNameLine1 = [iecNameLine[0] + 1]
    
    if (iecNameLine.length > 0) {
        var iecNameCode = getValuesFromPdf(iecNameLine1, " ", 1, null) + " " + getValuesFromPdf(iecNameLine1, " ", 2, null) + " " + getValuesFromPdf(iecNameLine1, " ", 3, null) + " " + getValuesFromPdf(iecNameLine1, " ", 4, null) + " " + getValuesFromPdf(iecNameLine1, " ", 5, null)
        // 
        output["iecName"] = iecNameCode;
    } else if (iecNameLine.length == 0) {
        output["iecName"] = "";
    }

    // EXPORTER'S Location
    var exporterLocationLine = getAllIndexes("6'")
    if (exporterLocationLine > 0) {
        var exporterLocationCode = getValuesFromPdf(exporterLocationLine, " ", 2, null) + " " + getValuesFromPdf(exporterLocationLine, " ", 3, null)
        output["exporterLocationCode"] = exporterLocationCode;
    } else {
        output["exporterLocationCode"] = "";
    }

    // COUNTRY OF FINALDESTINATION
    var finalDestinationLine = getAllIndexes("17.COUNTRY")
    if (finalDestinationLine.length > 0) {
        var finalDestinationCode = getValuesFromPdf(finalDestinationLine, " ", 10, null)
        if (finalDestinationCode == "KUWAIT") {
            output["countryOfFinaldestination"] = finalDestinationCode;
        } else if (finalDestinationCode != "KUWAIT") {
            var finalDestinationCode1 = getValuesFromPdf(finalDestinationLine, " ", 7, null)
            output["countryOfFinaldestination"] = finalDestinationCode1;
        } else {
            output["countryOfFinaldestination"] = " ";
        }
    } else if (finalDestinationLine.length == 0) {
        output["countryOfFinaldestination"] = "";
    }

    // CONSIGNEE NAME
    if (iecNameLine1.length > 0) {
        var consignNameCode = getValuesFromPdf(iecNameLine1, " ", 6, null) + " " + getValuesFromPdf(iecNameLine1, " ", 7, null) + " " + getValuesFromPdf(iecNameLine1, " ", 8, null) + " " + getValuesFromPdf(iecNameLine1, " ", 9, null)
        output["consigneeName"] = consignNameCode;
    } else if (iecNameLine1.length == 0) {
        output["consigneeName"] = "";
    }


    //AD Code
    var adCodeLine = getAllIndexes("AD CODE");
    if (adCodeLine.length > 0) {
        var adCode1 = getValuesFromPdf(adCodeLine, ":", 1, null);
        var adCode = getValuesFromPdf(adCodeLine, " ", 1, adCode1);
        output["adCode"] = adCode;
        if (adCode.length < 3) {
            adCode = getValuesFromPdf(adCodeLine, " ", 8, adCode1);
            output["adCode"] = adCode;
        }

    } else if (adCodeLine == 0) {
        output["adCode"] = "";
    }

    //LEO Date
    var leoDateLine = getAllIndexes("LEO Date");
    if (leoDateLine.length == 0) leoDateLine = getAllIndexes("LEo Date");

    if (leoDateLine.length == 0) leoDateLine = getAllIndexes("LEODate");
    if (leoDateLine.length > 0) {
        
        
        var n = split[leoDateLine].split(" ");
        
        var leoDate = n[n.length - 1]
        //return n[n.length - 1];
        //var leoDate = split[leoDateLine].split(" ")[leoDateLine[0] - 1];
        if (leoDate == undefined) {
            output["leodate"] = "dd-mm-yyyy";
        } else {
            output["leodate"] = leoDate;
        }

    } else if (leoDateLine.length == 0) {
        output["leodate"] = "dd-mm-yyyy";
    } else {
        output["leodate"] = "dd-mm-yyyy";
    }

    //Processing Status
    output["processingStaus"] = ""

    //Invoices
    var invoiceLine = getAllIndexes("NV NO")
    
    if (invoiceLine.length == 0) {
        invoiceLine = getAllIndexes("NV No")
        
        if (invoiceLine.length > 0) {
            var invoiceValue = findInvoices(invoiceLine, "NV No");
            output["invoices"] = invoiceValue;
            // 
            // var invoiceValue = getValuesFromPdf(parseInt(invoiceLine) + 1, " ", 0, null)
            // var invCheckValue = /^[+-]?\d+(\.\d+)?$/.test(invValue)
            // output["invoices"] = invCheckValue ? invoiceValue : getValuesFromPdf(parseInt(invoiceLine) + 1, " ", 6, null)

        } else if (invoiceLine.length == 0) {
            output["invoices"] = [{
                "sno": "1",
                "invoiceno": "",
                "amount": "",
                "currency": ""
            }]
        }

    } else if (invoiceLine.length > 0) {
        var invoiceValue = findInvoices(invoiceLine, "NV NO");
        output["invoices"] = invoiceValue;
        // var invValue = getValuesFromPdf(parseInt(invoiceLine) + 1, " ", 0, null)
        // var invCheckValue = /^[+-]?\d+(\.\d+)?$/.test(invValue)
        // output["invoices"] = invCheckValue ? invValue : getValuesFromPdf(parseInt(invoiceLine) + 1, " ", 6, null)
    }

    //FOB Currency
    currencyLine = getAllIndexes("USD");
    if (currencyLine.length == 0) {
        currencyLine = getAllIndexes("INR");
        if (currencyLine.length > 0) {
            output["fobCurrency"] = 'INR'
        } else if (currencyLine.length == 0) {
            output["fobCurrency"] = ''
        }
    } else if (currencyLine.length > 0) {
        output["fobCurrency"] = 'USD'
    }

    //FOB Value
    var fobValueLine = getAllIndexes("FOB ");
    if (fobValueLine.length > 0) {
        var fobValue = getValuesFromPdf(parseInt(fobValueLine) + 1, " ", 0, null)
        var checkValue = /^[+-]?\d+(\.\d+)?$/.test(fobValue)
        output["fobValue"] = checkValue ? fobValue : getValuesFromPdf(parseInt(fobValueLine) + 1, " ", 1, null)
    } else if (fobValueLine.length == 0) {
        output["fobValue"] = "";
    }

    //REALIZED FOB
    currencyLine = getAllIndexes("USD");
    if (currencyLine.length == 0) {
        currencyLine = getAllIndexes("INR");
        if (currencyLine.length > 0) {
            output["realizedFobCurrency"] = 'INR'
        } else if (currencyLine.length == 0) {
            output["realizedFobCurrency"] = ''
        }
    } else if (currencyLine.length > 0) {
        output["realizedFobCurrency"] = 'USD'
    }


    //CURRENCY
    currencyLine = getAllIndexes("USD");
    if (currencyLine.length == 0) {
        currencyLine = getAllIndexes("INR");
        if (currencyLine.length > 0) {
            output["currency"] = 'INR'
        } else if (currencyLine.length == 0) {
            output["currency"] = ''
        }
    } else if (currencyLine.length > 0) {
        output["currency"] = 'USD'
    }


    //REALIZED FOB VALUE    
    output["realizedFobValue"] = ""

    //EQUIVALENT FOB VALUE  
    output["equivalentFobValue"] = ""

    //FREIGHT CURRENCY 
    currencyLine = getAllIndexes("USD");
    if (currencyLine.length == 0) {
        currencyLine = getAllIndexes("INR");
        if (currencyLine.length > 0) {
            output["freightCurrency"] = 'INR'
        } else if (currencyLine.length == 0) {
            output["freightCurrency"] = ''
        }
    } else if (currencyLine.length > 0) {
        output["freightCurrency"] = 'USD'
    }

    //FREIGHT VALUE REALIZED 
    // var freightLine = getAllIndexes("FREIGHT")
    // 
    // if (freightLine.length > 0) {
    //     var freightValue = getValuesFromPdf(parseInt(freightLine) + 1, " ", 0, null)
    //     var freightCheckValue = /^[+-]?\d+(\.\d+)?$/.test(freightValue)
    //     output["freightValueRealized"] = freightCheckValue ? freightValue : getValuesFromPdf(parseInt(freightLine) + 1, " ", 2, null)
    // } else if (freightLine.length == 0) {
    //     output["freightValueRealized"] = "";
    // }

    output["freightValueRealized"] = "";

    //Realized FREIGHT CURRENCY
    currencyLine = getAllIndexes("USD");
    if (currencyLine.length == 0) {
        currencyLine = getAllIndexes("INR");
        if (currencyLine.length > 0) {
            output["realizedFreightCurrency"] = 'INR'
        } else if (currencyLine.length == 0) {
            output["realizedFreightCurrency"] = ''
        }
    } else if (currencyLine.length > 0) {
        output["realizedFreightCurrency"] = 'USD'
    }

    //REALIZED FREIGHT VALUE    
    // var freightLine = getAllIndexes("FREIGHT")
    // 
    // if (freightLine.length > 0) {
    //     var freightValue = getValuesFromPdf(parseInt(freightLine) + 1, " ", 0, null)
    //     var freightCheckValue = /^[+-]?\d+(\.\d+)?$/.test(freightValue)
    //     output["realizedFreightValue"] = freightCheckValue ? freightValue : getValuesFromPdf(parseInt(freightLine) + 1, " ", 2, null)
    // } else if (freightLine.length == 0) {
    output["realizedFreightValue"] = "";
    // }

    //INSURANCE CURRENCY    
    currencyLine = getAllIndexes("USD");
    if (currencyLine.length == 0) {
        currencyLine = getAllIndexes("INR");
        if (currencyLine.length > 0) {
            output["insuranceCurrency"] = 'INR'
        } else if (currencyLine.length == 0) {
            output["insuranceCurrency"] = ''
        }
    } else if (currencyLine.length > 0) {
        output["insuranceCurrency"] = 'USD'
    }

    //INSURANCE VALUE   
    var insurancLine = getAllIndexes("INSURANc")
    if (insurancLine.length > 0) {
        var insurancValue = getValuesFromPdf(parseInt(insurancLine) + 1, " ", 0, null)
        var insurancCheckValue = /^[+-]?\d+(\.\d+)?$/.test(insurancValue)
        output["insuranceValue"] = insurancCheckValue ? insurancValue : getValuesFromPdf(parseInt(insurancLine) + 1, " ", 3, null)
    } else if (insurancLine.length == 0) {
        var insurancLine = getAllIndexes("INSURANC")
        if (insurancLine.length > 0) {
            var insurancValue = getValuesFromPdf(parseInt(insurancLine) + 1, " ", 0, null)
            var insurancCheckValue = /^[+-]?\d+(\.\d+)?$/.test(insurancValue)
            output["insuranceValue"] = insurancCheckValue ? insurancValue : getValuesFromPdf(parseInt(insurancLine) + 1, " ", 3, null)
        } else if (insurancLine.length == 0) {
            output["insuranceValue"] = "";
        }
    } else {
        output["insuranceValue"] = "";
    }

    //REALIZED INSURANCE VALUE  
    output["realizedInsuranceValue"] = ""

    //BANKING CHARGES   
    output["bankingCharges"] = ""

    //EXPECTED PAYMENT LAST DATE    
    output["expectedPaymentlastdate"] = ""

    //ADDED DATE    
    output["AddedDate"] = ""

    //MODIFIED DATE
    output["modifiedDate"] = ""



    
    //
    //let res = [output]
    // let res = [output, publicUrl]
    // resolve(res)
    

}

function findInvoices(line, str) {
    var invoices = [];

    var secondSNo = '1'
    var secondInvoiceNo = str == "a" ? getValuesFromPdf(parseInt(line) + 1, " ", 5, null) : getValuesFromPdf(parseInt(line) + 1, " ", 6, null)
    
    
    
    
    
    if (secondInvoiceNo.length < 9) {
        
        
        secondInvoiceNo = getValuesFromPdf(parseInt(line) + 1, " ", 5, null)
    }
    var secondInvoiceAmount = getValuesFromPdf(parseInt(line) + 1, " ", 7, null)
    var secondInvoiceCurrency = getValuesFromPdf(parseInt(line) + 1, " ", 8, null)
    
    if (secondInvoiceCurrency == undefined) {
        secondInvoiceCurrency = 'USD'
    }
    if (secondInvoiceAmount == 'USD') {
        secondInvoiceAmount = getValuesFromPdf(parseInt(line) + 1, " ", 6, null)
    }
    if (secondInvoiceAmount != undefined && secondInvoiceCurrency != undefined) {
        invoices.push({
            "sno": secondSNo == undefined ? "" : secondSNo,
            "invoiceno": secondInvoiceNo == undefined ? "" : secondInvoiceNo,
            "amount": secondInvoiceAmount == undefined ? "" : secondInvoiceAmount,
            "currency": secondInvoiceCurrency == undefined ? "" : secondInvoiceCurrency
        })
    }

    return invoices;

}

// generatePdfJson(temp)

//function to get all indexes of string
function getAllIndexes(val) {
    var indexes = [],
        i = -1;
    var line;
    for (var m = 0; m < split.length; m++) {
        // 
        while ((i = split[m].indexOf(val, i + 1)) != -1) {
            if (line != m) indexes.push(m);
            line = m;
        }
    }
    return indexes;
}

function getValuesFromPdf(line, separator, index, str2) {
    // 
    // 
    // 
    // 
    // 
    // 
    if (str2 == null) {
        return split[line].split(separator)[index];

    } else if (str2 != null) {
        return str2.split(separator)[index];
    }


}